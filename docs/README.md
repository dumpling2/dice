# Discord ダイスボット

Discord用のTRPG向けダイスボットです。様々なダイスロール機能を提供し、テキストベースのテーブルトークRPGをサポートします。モジュール化された構造で拡張性と保守性が高い設計になっています。

## 主な機能

- **複数ダイスサポート** - 例: `!roll 1d20+2d6+3`
- **クリティカル/ファンブル判定**
- **直感的なUI** - Discord Embedsによる視覚的な結果表示
- **インタラクティブボタン** - ワンクリックで再ロール
- **ロール履歴** - 過去10回分のロール結果を保存・表示

## プロジェクト構造

```
dice/
├── src/            # ソースコード
│   ├── dice/       # ダイスロールロジック
│   ├── commands/   # コマンド処理
│   ├── utils/      # ユーティリティ
│   └── views/      # UI要素
├── config/         # 設定ファイル
├── tests/          # テストコード
└── archive/        # 過去のバージョン（参考用）
```

詳細な使用方法については `docs/usage.md` を参照してください。開発へ貢献する場合は `docs/contributing.md` をご覧ください。

## セットアップ方法

1. リポジトリをクローン:
   ```
   git clone <repository-url>
   cd dice
   ```

2. 必要なパッケージをインストール:
   ```
   pip install -r requirements.txt
   ```

3. 環境変数の設定:
   ```
   cp .env.example .env
   # .envファイルを編集して Discord Bot トークンを設定
   ```

## 使用方法

### ボットの起動
```
python dice/main.py
```

デバッグモードで起動する場合:
```
python dice/main.py --debug
```

### 基本的なダイスロールコマンド
```
!roll NdS[+/-M]      # 基本的なダイスロール
!roll NdS+MdL[+/-X]  # 複数種類のダイスロール
```

例:
- `!roll d20` - 20面ダイスを1個振る
- `!roll 2d6` - 6面ダイスを2個振る
- `!roll 1d10+5` - 10面ダイスを1個振り、結果に5を加える
- `!roll 1d20+2d4-1` - 1個の20面ダイスと2個の4面ダイスを振り、結果から1を引く

### その他のコマンド
- `!roll help` - ヘルプを表示
- `!history` - あなたの過去10回分のロール履歴を表示

## 制限事項

- ダイスの数は1〜100個まで
- ダイスの面数は2〜1000まで
- 修正値は-1000〜1000まで

## 開発について

プロジェクトは単一責任の原則に基づいて設計されており、各モジュールは明確な役割を持っています。開発ガイドラインや貢献方法については `docs/contributing.md` を参照してください。

## テスト

テストの実行:
```
python -m unittest discover -s tests
```

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。 