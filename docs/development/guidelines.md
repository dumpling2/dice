# Cursor IDEのためのコーディングガイドライン

このドキュメントは、Cursor IDEでの開発効率を最大化するためのコーディングガイドラインを提供します。

## コードの設計原則

### 1. モジュール化と責任の分離

- **単一責任の原則**：各モジュールは1つの明確な責任を持つべきです。
- **ファイルサイズの制限**：ファイルは300行を超えないようにします。
- **関数の長さ**：関数は50行以下に保ちます。
- **依存関係の明示**：モジュール間の依存関係を明確にします。

### 2. 命名規則

- **明確な名前**：変数、関数、クラスには意図が明確に伝わる名前を使用します。
- **一貫性のある命名**：プロジェクト全体で一貫した命名規則を使用します。
- **Pythonの規約**：
  - `snake_case` - 変数、関数、メソッド名
  - `PascalCase` - クラス名
  - `UPPER_CASE` - 定数

### 3. コメントとドキュメンテーション

- **docstringsの活用**：すべてのモジュール、クラス、関数にdocstringを書きます。
- **コードコメント**：複雑なロジックには適切なコメントを追加します。
- **適切な粒度**：必要に応じてコメントの詳細さを調整します。

### 4. コード構造

- **論理的な順序**：関連するコードをグループ化し、論理的な順序で配置します。
- **インポートの整理**：標準ライブラリ、サードパーティ、自作モジュールの順に整理します。
- **一貫した書式**：インデント、空白行などの書式を一貫させます。

## Cursor IDEに最適化されたプロジェクト構造

### 1. ファイル構造

```
dice/
├── src/                 # ソースコード
│   ├── dice/            # ダイスロールの中核ロジック
│   │   ├── parser.py    # ダイス表記の解析
│   │   ├── roller.py    # ダイスロール実行
│   │   └── renderer.py  # 結果表示
│   ├── commands/        # コマンド処理
│   │   ├── roll.py      # ロールコマンド
│   │   └── history.py   # 履歴コマンド
│   ├── utils/           # ユーティリティ
│   │   └── logger.py    # ロギング
│   └── views/           # UI要素
│       └── dice_view.py # ダイスUI
├── config/              # 設定
│   └── settings.py      # 設定管理
├── tests/               # テストコード
├── docs/                # ドキュメント
└── main.py              # ランチャー
```

### 2. 命名パターン

#### ファイル名

- 小文字とアンダースコアを使用します。
- 機能や役割を明確に反映する名前を選びます。
- 例: `dice_parser.py`, `roll_command.py`

#### モジュール名

- 短く、明確で、説明的な名前を使用します。
- 例: `parser`, `roller`, `renderer`

#### クラス名

- PascalCaseを使用します。
- 機能を表す名詞または名詞句を使います。
- 例: `DiceRoller`, `RollCommand`, `HistoryView`

#### 関数名

- snake_caseを使用します。
- 動詞または動詞句で始まる名前にします。
- 例: `parse_dice_notation()`, `roll_dice()`, `format_result()`

## Cursor IDE向けのコーディング実践

### 1. コード検索の最適化

- **一貫した命名**：似たような機能には似た名前を使用し、検索しやすくします。
- **明確な関数シグネチャ**：関数の引数と戻り値の型を明示します。
- **一意な識別子**：クラスや関数に一意な名前を付け、検索結果を絞り込みます。

### 2. コード補完の活用

- **型ヒントの使用**：引数、戻り値、変数に型ヒントを使用します。
- **ドキュメンテーション**：詳細なdocstringを書き、コード補完時に表示されるようにします。
- **一貫したAPI設計**：メソッド名やパラメータ名を一貫させます。

### 3. AI支援のためのコーディング

- **明確な意図**：コードの意図を明確に表現し、AIが理解しやすくします。
- **適切な粒度**：関数やクラスを適切な粒度に分割します。
- **命名の一貫性**：AIが関連コードを見つけやすいよう、命名を一貫させます。

## ベストプラクティス

1. **早期エラー検出**：型ヒント、アサーション、バリデーションを使用します。
2. **テスト駆動開発**：テストを先に書き、それを満たすコードを実装します。
3. **リファクタリング**：コードの動作を変えずに、構造を改善します。
4. **コードレビュー**：他の開発者のフィードバックを積極的に取り入れます。
5. **継続的な改善**：定期的にコードを見直し、改善します。

## まとめ

これらのガイドラインを遵守することで、Cursor IDEの強力な機能を最大限に活用しながら、メンテナンス性が高く、拡張性のあるコードを書くことができます。このアプローチにより、開発の効率と品質が向上します。 